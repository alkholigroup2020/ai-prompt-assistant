import{e as T,W as b}from"./D_7VKaxR.js";function C(){const l=b().public.appUrl||"";async function i(t,n={}){const{method:e="GET",body:u,retry:s=3,timeout:o=3e4}=n;let c=null;for(let p=0;p<s;p++)try{const a=new AbortController,r=setTimeout(()=>a.abort(),o),g=await $fetch(t,{baseURL:l,method:e,body:u,signal:a.signal,headers:{"Content-Type":"application/json"}});return clearTimeout(r),g}catch(a){if(c=a,a&&typeof a=="object"&&"statusCode"in a){const r=a.statusCode;if(r&&r>=400&&r<500)throw a}p<s-1&&await new Promise(r=>setTimeout(r,Math.pow(2,p)*1e3))}throw c}async function f(t){const n=T({loading:!0,error:null});try{const e=await i("/api/enhance-prompt",{method:"POST",body:t});return n.loading=!1,e}catch(e){throw n.loading=!1,n.error=e,e}}async function m(t,n,e,u=1,s=20){const o=new URLSearchParams;t&&o.append("category",t),n&&o.append("difficulty",n),e&&o.append("search",e),o.append("page",u.toString()),o.append("limit",s.toString());const c=`/api/templates?${o.toString()}`;return await i(c,{retry:2})}async function h(t){return await i(`/api/templates/${t}`,{retry:2})}async function y(t){return await i("/api/analyze-prompt",{method:"POST",body:{prompt:t}})}async function d(t,n,e){return await i("/api/export",{method:"POST",body:{content:t,format:n,metadata:e},retry:1})}async function w(){return await i("/api/health",{retry:1})}return{enhancePrompt:f,fetchTemplates:m,fetchTemplate:h,analyzePrompt:y,exportPrompt:d,checkHealth:w}}export{C as u};
