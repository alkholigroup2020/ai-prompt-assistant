import{u as x}from"./DRDYMHsX.js";import{e as B,c as i,r as D}from"./DNzG_PLS.js";function z(){const l=x(),t=B({templates:[],currentTemplate:null,loading:!1,error:null,filters:{category:null,difficulty:null,search:""},pagination:{page:1,limit:20,total:0,totalPages:0}});async function n(){t.loading=!0,t.error=null;try{const a=await l.fetchTemplates(t.filters.category||void 0,t.filters.difficulty||void 0,t.filters.search||void 0,t.pagination.page,t.pagination.limit);a.data&&(t.templates=a.data.templates,t.pagination.total=a.data.total,t.pagination.totalPages=Math.ceil(a.data.total/a.data.pageSize))}catch(a){throw t.error=a,a}finally{t.loading=!1}}async function c(a){t.loading=!0,t.error=null;try{const e=await l.fetchTemplate(a);e.data&&(t.currentTemplate=e.data)}catch(e){throw t.error=e,e}finally{t.loading=!1}}function o(a){t.filters.category=a,t.pagination.page=1}function r(a){t.filters.difficulty=a,t.pagination.page=1}function s(a){t.filters.search=a,t.pagination.page=1}function f(){t.filters.category=null,t.filters.difficulty=null,t.filters.search="",t.pagination.page=1}function p(a){a>=1&&a<=t.pagination.totalPages&&(t.pagination.page=a)}function g(){t.pagination.page<t.pagination.totalPages&&t.pagination.page++}function u(){t.pagination.page>1&&t.pagination.page--}async function y(a){s(a),await n()}async function m(a){o(a),await n()}async function d(a){r(a),await n()}function h(){t.currentTemplate=null}const T=i(()=>t.templates.length>0),P=i(()=>t.currentTemplate!==null),w=i(()=>t.filters.category!==null||t.filters.difficulty!==null||t.filters.search!==""),v=i(()=>t.pagination.page<t.pagination.totalPages),C=i(()=>t.pagination.page>1);return{state:D(t),fetchTemplates:n,fetchTemplate:c,setCategory:o,setDifficulty:r,setSearch:s,clearFilters:f,goToPage:p,nextPage:g,previousPage:u,search:y,filterByCategory:m,filterByDifficulty:d,clearCurrentTemplate:h,hasTemplates:T,hasCurrentTemplate:P,hasFilters:w,hasNextPage:v,hasPreviousPage:C}}export{z as u};
