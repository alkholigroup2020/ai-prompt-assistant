import{g as o,O as h,T as u}from"./u0wlO-T7.js";function a(){return{role:"",audience:"",task:"",tone:u.PROFESSIONAL,outputFormat:h.PARAGRAPH,constraints:[],enhancementLevel:"quick",language:"en",timestamp:new Date,sessionId:crypto.randomUUID()}}const m=o("form",{state:()=>({formInput:a(),validationErrors:{},isDirty:!1}),getters:{isValid(){return Object.keys(this.validationErrors).length===0},isComplete(){return!!(this.formInput.role&&this.formInput.audience&&this.formInput.task&&this.formInput.task.length>=10)},formData(){return{...this.formInput,timestamp:new Date}},hasError:t=>e=>!!t.validationErrors[e],getError:t=>e=>t.validationErrors[e],completionPercentage(){const t=["role","audience","task"],e=["examples","context"];let s=0,r=t.length;return t.forEach(i=>{this.formInput[i]&&s++}),e.forEach(i=>{this.formInput[i]&&(s+=.5)}),r+=e.length*.5,this.formInput.constraints.length>0&&(s+=.5),r+=.5,Math.round(s/r*100)}},actions:{updateField(t,e){if(this.formInput[t]=e,this.isDirty=!0,t in this.validationErrors){const s={...this.validationErrors},r=t;if(r in s){const{[r]:i,...n}=s;this.validationErrors=n}}},updateFields(t){Object.keys(t).forEach(e=>{const s=e;t[s]!==void 0&&(this.formInput[s]=t[s])}),this.isDirty=!0},setForm(t){this.formInput={...a(),...t,timestamp:new Date,sessionId:this.formInput.sessionId},this.isDirty=!0,this.validateForm()},validateForm(){const t={};return!this.formInput.role||this.formInput.role.trim().length===0?t.role="Role is required":this.formInput.role.length>100&&(t.role="Role must be less than 100 characters"),!this.formInput.audience||this.formInput.audience.trim().length===0?t.audience="Audience is required":this.formInput.audience.length>100&&(t.audience="Audience must be less than 100 characters"),!this.formInput.task||this.formInput.task.trim().length===0?t.task="Task description is required":this.formInput.task.length<10?t.task="Task must be at least 10 characters":this.formInput.task.length>1e3&&(t.task="Task must be less than 1000 characters"),this.formInput.examples&&this.formInput.examples.length>3e3&&(t.examples="Examples must be less than 3000 characters"),this.formInput.context&&this.formInput.context.length>1500&&(t.context="Context must be less than 1500 characters"),this.validationErrors=t,Object.keys(t).length===0},validateField(t){const e={};switch(t){case"role":!this.formInput.role||this.formInput.role.trim().length===0?e.role="Role is required":this.formInput.role.length>100&&(e.role="Role must be less than 100 characters");break;case"audience":!this.formInput.audience||this.formInput.audience.trim().length===0?e.audience="Audience is required":this.formInput.audience.length>100&&(e.audience="Audience must be less than 100 characters");break;case"task":!this.formInput.task||this.formInput.task.trim().length===0?e.task="Task description is required":this.formInput.task.length<10?e.task="Task must be at least 10 characters":this.formInput.task.length>1e3&&(e.task="Task must be less than 1000 characters");break;case"examples":this.formInput.examples&&this.formInput.examples.length>3e3&&(e.examples="Examples must be less than 3000 characters");break;case"context":this.formInput.context&&this.formInput.context.length>1500&&(e.context="Context must be less than 1500 characters");break}const s=t;if(e[s])this.validationErrors[s]=e[s];else if(s in this.validationErrors){const r={...this.validationErrors},{[s]:i,...n}=r;this.validationErrors=n}return!e[t]},resetForm(){this.formInput=a(),this.validationErrors={},this.isDirty=!1},clearValidationErrors(){this.validationErrors={}},addConstraint(t){this.formInput.constraints.includes(t)||(this.formInput.constraints.push(t),this.isDirty=!0)},removeConstraint(t){const e=this.formInput.constraints.indexOf(t);e>-1&&(this.formInput.constraints.splice(e,1),this.isDirty=!0)},toggleConstraint(t){this.formInput.constraints.includes(t)?this.removeConstraint(t):this.addConstraint(t)},markClean(){this.isDirty=!1}}});export{m as u};
