import{u as ae,a as oe,_ as re,b as le}from"./u0wlO-T7.js";import{_ as ie}from"./CqOAplC9.js";import{aD as ne,br as ce,au as de,c as f,b as ue,w as me,d as he,aE as fe,b5 as T,bp as s,b4 as c,u as l,b6 as r,a$ as d,b3 as p,bs as ge,bA as g,a_ as k,aZ as N,b0 as pe}from"./DNzG_PLS.js";import{u as be}from"./DlTQmCGC.js";import{u as xe,a as _e}from"./BwQ97I9R.js";import"./CUdrvLTM.js";import"./DRDYMHsX.js";function ve(){function V(e){const o=t(e),m=w(e),i=S(e,o,m),b=Math.round((o.clarity*.25+o.specificity*.25+o.context*.2+o.structure*.15+o.completeness*.15)*100);return{score:Math.max(0,Math.min(100,b)),breakdown:o,completeness:m,suggestions:i,isComplete:m===100}}function t(e){return{clarity:E(e),specificity:x(e),context:u(e),structure:$(e),completeness:B(e)}}function E(e){let o=0;return e.role&&e.role.length>=3&&(o+=.3),e.audience&&e.audience.length>=3&&(o+=.3),e.tone&&(o+=.2),e.outputFormat&&(o+=.2),o}function x(e){let o=0;return e.task&&(e.task.length>=200?o+=.5:e.task.length>=100?o+=.35:e.task.length>=50&&(o+=.2)),e.constraints&&e.constraints.length>0&&(o+=.3),e.examples&&e.examples.length>=20&&(o+=.2),o}function u(e){let o=.3;return e.context&&e.context.length>=50?o+=.4:e.context&&e.context.length>=20&&(o+=.2),e.examples&&e.examples.length>=50?o+=.3:e.examples&&e.examples.length>=20&&(o+=.15),Math.min(1,o)}function $(e){let o=.4;if(e.task){const i=/\d+\.|[a-z]\)/i.test(e.task),b=/[-*â€¢]/.test(e.task),v=/\n/.test(e.task);(i||b)&&(o+=.2),v&&(o+=.1)}const m=[e.role,e.audience,e.task,e.tone,e.outputFormat,e.constraints?.length,e.examples,e.context].filter(Boolean).length;return o+=m/8*.3,Math.min(1,o)}function B(e){const o=[e.role,e.audience,e.task,e.tone,e.outputFormat],m=[e.constraints?.length,e.examples,e.context],i=o.filter(Boolean).length,b=m.filter(Boolean).length,v=i/o.length*.7,q=b/m.length*.3;return v+q}function w(e){const m=[e.role,e.audience,e.task,e.tone,e.outputFormat,e.constraints?.length,e.examples,e.context].filter(Boolean).length;return Math.round(m/8*100)}function S(e,o,m){const i=[];return o.clarity<.7&&((!e.role||e.role.length<3)&&i.push("Add a clear role to improve clarity"),(!e.audience||e.audience.length<3)&&i.push("Specify your target audience for better results"),e.tone||i.push("Select a tone to guide the AI's response style"),e.outputFormat||i.push("Choose an output format to structure the response")),o.specificity<.7&&((!e.task||e.task.length<50)&&i.push("Add more details to your task description"),(!e.constraints||e.constraints.length===0)&&i.push("Add constraints to better define the scope"),e.examples||i.push("Include examples to clarify your expectations")),o.context<.7&&((!e.context||e.context.length<50)&&i.push("Provide additional context or background information"),(!e.examples||e.examples.length<50)&&i.push("Add more detailed examples to improve context")),o.structure<.7&&i.push("Consider organizing your task with bullet points or numbering"),m<80&&i.push("Fill in more optional fields for a comprehensive prompt"),i.slice(0,5)}function A(e){return e>=90?"Excellent":e>=75?"Good":e>=60?"Fair":e>=40?"Needs Improvement":"Poor"}function L(e){return e>=75?"emerald":e>=50?"yellow":"red"}return{calculate:V,calculateBreakdown:t,calculateCompleteness:w,generateSuggestions:S,getRatingLabel:A,getScoreColor:L}}const ye={class:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8"},ke={class:"container mx-auto px-4"},we={class:"mb-8"},Se={class:"text-3xl font-bold text-gray-900 dark:text-white mb-2"},De={class:"text-lg text-gray-600 dark:text-gray-400"},Ce={class:"mb-6 md:mb-8"},Fe={class:"flex items-center justify-between mb-2"},Ee={class:"text-sm md:text-base font-medium text-gray-700 dark:text-gray-300"},$e={class:"text-sm md:text-base font-medium text-emerald-700 dark:text-emerald-400"},Be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8"},Ae={class:"space-y-6"},Le={class:"flex items-center gap-2"},qe={class:"text-xl font-semibold text-gray-900 dark:text-white"},ze={class:"space-y-4"},Te={class:"flex items-center gap-2"},Ve={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ie={class:"space-y-4"},je={class:"flex items-center gap-2"},Ke={class:"text-xl font-semibold text-gray-900 dark:text-white"},Me={class:"flex items-center gap-2"},Ne={class:"text-xl font-semibold text-gray-900 dark:text-white"},Pe={class:"space-y-6 lg:sticky lg:top-8 lg:self-start"},Re={class:"flex items-center justify-between"},Qe={class:"flex items-center gap-2"},Oe={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ue={class:"flex flex-col items-center space-y-4"},Ge={class:"w-full"},He={class:"flex items-center gap-2"},Ze={class:"text-xl font-semibold text-gray-900 dark:text-white"},Je={class:"flex items-center gap-2"},We={class:"text-xl font-semibold text-gray-900 dark:text-white"},Xe={class:"prose prose-sm dark:prose-invert max-w-none"},Ye={key:0,class:"text-gray-500 dark:text-gray-400 italic"},et={key:1,class:"whitespace-pre-wrap text-gray-900 dark:text-gray-100"},tt={class:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400"},st={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4"},at={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4"},ot={class:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},rt={class:"flex items-start gap-3"},lt={class:"flex-1"},it={class:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2"},nt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 text-sm text-blue-700 dark:text-blue-300"},ct=ne({__name:"builder",setup(V){const{t}=ce(),E=ge(),x=ae(),u=be(),{enhance:$,state:B,enhancedPrompt:w}=xe(),{calculate:S}=ve(),{saveDraft:A,loadDraft:L,startAutoSave:e,stopAutoSave:o}=_e();de({title:f(()=>t("builder.meta.title")),meta:[{name:"description",content:f(()=>t("builder.meta.description"))},{name:"keywords",content:f(()=>t("builder.meta.keywords"))}]});const m=ue("idle"),i=f(()=>B.loading),b=f(()=>S(u.formData)),v=f(()=>b.value.score),q=f(()=>b.value.breakdown),P=f(()=>b.value.suggestions),D=f(()=>u.completionPercentage),y=f(()=>{const a=u.formData;if(!a.task)return"";const n=[];return a.role&&n.push(`${t("builder.preview.roleLabel")}: ${a.role}`),a.audience&&n.push(`${t("builder.preview.audienceLabel")}: ${a.audience}`),n.push(`
${t("builder.preview.taskLabel")}:
${a.task}`),a.tone&&n.push(`
${t("builder.preview.toneLabel")}: ${a.tone}`),a.outputFormat&&n.push(`${t("builder.preview.formatLabel")}: ${a.outputFormat}`),a.constraints.length>0&&n.push(`
${t("builder.preview.constraintsLabel")}:
- ${a.constraints.join(`
- `)}`),a.examples&&n.push(`
${t("builder.preview.examplesLabel")}:
${a.examples}`),a.context&&n.push(`
${t("builder.preview.contextLabel")}:
${a.context}`),n.join(`
`)}),R=f(()=>y.value?y.value.trim().split(/\s+/).filter(a=>a.length>0).length:0),Q=f(()=>y.value.length),C=async a=>{if(!u.isValid){x.add({title:t("builder.validation.error"),description:t("builder.validation.fixErrors"),color:"primary",icon:"i-heroicons-exclamation-triangle"});return}u.updateField("enhancementLevel",a);try{await $(u.formData),w.value&&(x.add({title:t("builder.enhancement.success"),description:t("builder.enhancement.successDescription"),color:"emerald",icon:"i-heroicons-check-circle"}),E.push("/results"))}catch{x.add({title:t("builder.enhancement.error"),description:t("builder.enhancement.errorDescription"),color:"primary",icon:"i-heroicons-x-circle"})}},I=()=>{confirm(t("builder.actions.resetConfirm"))&&(u.resetForm(),x.add({title:t("builder.actions.resetSuccess"),description:t("builder.actions.resetSuccessDescription"),color:"primary",icon:"i-heroicons-arrow-path"}))},j=()=>{const a={draft:u.formData,lastSaved:new Date,autoSaved:!1};A(a),x.add({title:t("builder.actions.draftSaved"),description:t("builder.actions.draftSavedDescription"),color:"emerald",icon:"i-heroicons-bookmark"})},O=a=>{a.field&&a.value&&(u.updateField(a.field,a.value),x.add({title:t("builder.suggestions.applied"),description:t("builder.suggestions.appliedDescription"),color:"emerald",icon:"i-heroicons-check-circle"}))},K=a=>{if(a.ctrlKey&&a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),u.isValid&&!i.value&&C("quick")),a.ctrlKey&&a.shiftKey&&a.key==="Enter"&&(a.preventDefault(),u.isValid&&!i.value&&C("detailed")),a.ctrlKey&&a.key==="s"&&(a.preventDefault(),u.formData.task&&j()),a.ctrlKey&&a.key==="r"&&(a.preventDefault(),I()),a.key==="Escape"){const n=document.activeElement;n&&n.blur()}};return me(()=>u.formData,()=>{m.value="saving",setTimeout(()=>{m.value="saved",setTimeout(()=>{m.value="idle"},2e3)},500)},{deep:!0}),he(()=>{const a=L();a&&a.draft&&Object.entries(a.draft).forEach(([n,z])=>{u.updateField(n,z)}),e(()=>({draft:u.formData,lastSaved:new Date,autoSaved:!0})),window.addEventListener("keydown",K)}),fe(()=>{o(),window.removeEventListener("keydown",K)}),(a,n)=>{const z=g("ProgressBar"),h=re,U=g("RoleSelector"),G=g("AudienceSelector"),H=g("TaskInput"),_=g("Card"),Z=g("ToneSelector"),J=g("OutputFormatSelector"),W=g("ConstraintsSelector"),X=g("AdvancedOptions"),M=ie,Y=g("QualityScore"),ee=g("QualityBreakdown"),te=g("Suggestions"),F=oe;return k(),T("div",ye,[s("div",ke,[s("div",we,[s("h1",Se,c(l(t)("builder.title")),1),s("p",De,c(l(t)("builder.subtitle")),1)]),s("div",Ce,[s("div",Fe,[s("span",Ee,c(l(t)("builder.progress.label")),1),s("span",$e,c(D.value)+"% ",1)]),r(z,{value:D.value,color:"primary",size:"md",striped:D.value<100,animated:D.value<100},null,8,["value","striped","animated"])]),s("div",Be,[s("div",Ae,[r(_,{padding:"lg",shadow:"md"},{header:d(()=>[s("div",Le,[r(h,{name:"i-heroicons-information-circle",class:"w-5 h-5 text-emerald-700"}),s("h2",qe,c(l(t)("builder.sections.basic")),1)])]),default:d(()=>[s("div",ze,[r(U),r(G),r(H)])]),_:1}),r(_,{padding:"lg",shadow:"md"},{header:d(()=>[s("div",Te,[r(h,{name:"i-heroicons-paint-brush",class:"w-5 h-5 text-emerald-700"}),s("h2",Ve,c(l(t)("builder.sections.style")),1)])]),default:d(()=>[s("div",Ie,[r(Z),r(J)])]),_:1}),r(_,{padding:"lg",shadow:"md"},{header:d(()=>[s("div",je,[r(h,{name:"i-heroicons-shield-check",class:"w-5 h-5 text-emerald-700"}),s("h2",Ke,c(l(t)("builder.sections.constraints")),1)])]),default:d(()=>[r(W)]),_:1}),r(_,{padding:"lg",shadow:"md"},{header:d(()=>[s("div",Me,[r(h,{name:"i-heroicons-adjustments-horizontal",class:"w-5 h-5 text-emerald-700"}),s("h2",Ne,c(l(t)("builder.sections.advanced")),1)])]),default:d(()=>[r(X)]),_:1})]),s("div",Pe,[r(_,{padding:"lg",shadow:"md"},{header:d(()=>[s("div",Re,[s("div",Qe,[r(h,{name:"i-heroicons-chart-bar",class:"w-5 h-5 text-emerald-700"}),s("h2",Oe,c(l(t)("builder.preview.quality")),1)]),m.value==="saved"?(k(),N(M,{key:0,color:"emerald",variant:"subtle"},{default:d(()=>[p(c(l(t)("builder.autoSave.saved")),1)]),_:1})):m.value==="saving"?(k(),N(M,{key:1,color:"primary",variant:"subtle"},{default:d(()=>[p(c(l(t)("builder.autoSave.saving")),1)]),_:1})):pe("",!0)])]),default:d(()=>[s("div",Ue,[r(Y,{score:v.value,size:"lg","show-label":!0},null,8,["score"]),s("div",Ge,[r(ee,{breakdown:q.value},null,8,["breakdown"])])])]),_:1}),r(_,{padding:"lg",shadow:"md"},{header:d(()=>[s("div",He,[r(h,{name:"i-heroicons-light-bulb",class:"w-5 h-5 text-emerald-700"}),s("h2",Ze,c(l(t)("builder.preview.suggestions")),1)])]),default:d(()=>[r(te,{suggestions:P.value,onApply:O},null,8,["suggestions"])]),_:1}),r(_,{padding:"lg",shadow:"md"},{header:d(()=>[s("div",Je,[r(h,{name:"i-heroicons-eye",class:"w-5 h-5 text-emerald-700"}),s("h2",We,c(l(t)("builder.preview.title")),1)])]),footer:d(()=>[s("div",tt,[s("span",null,c(l(t)("builder.preview.words"))+": "+c(R.value),1),s("span",null,c(l(t)("builder.preview.chars"))+": "+c(Q.value),1)])]),default:d(()=>[s("div",Xe,[y.value?(k(),T("div",et,c(y.value),1)):(k(),T("p",Ye,c(l(t)("builder.preview.empty")),1))])]),_:1}),s("div",st,[r(F,{color:"primary",size:"lg",block:"",class:"min-h-[44px]",loading:i.value,disabled:!l(u).isValid||i.value,"aria-busy":i.value,"aria-label":i.value?l(t)("builder.actions.enhancing"):l(t)("builder.actions.quickEnhance"),onClick:n[0]||(n[0]=se=>C("quick"))},{leading:d(()=>[r(h,{name:"i-heroicons-sparkles"})]),default:d(()=>[p(" "+c(l(t)("builder.actions.quickEnhance")),1)]),_:1},8,["loading","disabled","aria-busy","aria-label"]),r(F,{color:"emerald",size:"lg",block:"",class:"min-h-[44px]",loading:i.value,disabled:!l(u).isValid||i.value,"aria-busy":i.value,"aria-label":i.value?l(t)("builder.actions.enhancing"):l(t)("builder.actions.deepEnhance"),onClick:n[1]||(n[1]=se=>C("detailed"))},{leading:d(()=>[r(h,{name:"i-heroicons-bolt"})]),default:d(()=>[p(" "+c(l(t)("builder.actions.deepEnhance")),1)]),_:1},8,["loading","disabled","aria-busy","aria-label"])]),s("div",at,[r(F,{variant:"outline",size:"md",block:"",class:"min-h-[44px]",disabled:i.value,onClick:I},{leading:d(()=>[r(h,{name:"i-heroicons-arrow-path"})]),default:d(()=>[p(" "+c(l(t)("builder.actions.reset")),1)]),_:1},8,["disabled"]),r(F,{variant:"outline",size:"md",block:"",class:"min-h-[44px]",disabled:!l(u).formData.task||i.value,onClick:j},{leading:d(()=>[r(h,{name:"i-heroicons-bookmark"})]),default:d(()=>[p(" "+c(l(t)("builder.actions.saveDraft")),1)]),_:1},8,["disabled"])])])]),s("div",ot,[s("div",rt,[r(h,{name:"i-heroicons-information-circle",class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),s("div",lt,[s("h3",it,c(l(t)("builder.shortcuts.title")),1),s("div",nt,[s("div",null,[n[2]||(n[2]=s("kbd",{class:"px-2 py-1 bg-white dark:bg-gray-800 rounded"},"Ctrl+Enter",-1)),p(" "+c(l(t)("builder.shortcuts.quickEnhance")),1)]),s("div",null,[n[3]||(n[3]=s("kbd",{class:"px-2 py-1 bg-white dark:bg-gray-800 rounded"},"Ctrl+Shift+Enter",-1)),p(" "+c(l(t)("builder.shortcuts.deepEnhance")),1)]),s("div",null,[n[4]||(n[4]=s("kbd",{class:"px-2 py-1 bg-white dark:bg-gray-800 rounded"},"Ctrl+S",-1)),p(" "+c(l(t)("builder.shortcuts.saveDraft")),1)]),s("div",null,[n[5]||(n[5]=s("kbd",{class:"px-2 py-1 bg-white dark:bg-gray-800 rounded"},"Ctrl+R",-1)),p(" "+c(l(t)("builder.shortcuts.reset")),1)]),s("div",null,[n[6]||(n[6]=s("kbd",{class:"px-2 py-1 bg-white dark:bg-gray-800 rounded"},"Esc",-1)),p(" "+c(l(t)("builder.shortcuts.clearFocus")),1)])])])])])])])}}}),bt=le(ct,[["__scopeId","data-v-61a5c89e"]]);export{bt as default};
